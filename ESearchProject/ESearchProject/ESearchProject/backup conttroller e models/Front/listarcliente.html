<!doctype html>
<html lang="en">
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css">

    <title>Cadastro de Cliente</title>
    
    <style>
            body{
                padding: 1rem;
                margin: 1rem 1rem 1rem 1rem;
                background-color: white;
                text-align: center;
                color: black;
            }
        </style>

</head>
  
  <body>
        <!-- <body background="bgimage.jpg"> -->
    <h1>Sua página de Cadastro</h1>
    <hr>

    <!-- Inicio do container-fluid -->
    <div class="container-fluid">
    
        <div id="conteudo">

        </div>

      </div>

      <!-- fim do container-fluid -->


      <!-- script para acesso a api -->
      <script type="text/javascript">
      
        var xhr = new XMLHttpRequest(); /*requisição para o HTML*/
        var url = "http://localhost:5000/api/cliente"; /*utilizar a url*/    
          //vamos pegar a parte final da url a partir do ponto de interrogacao
          // que no javascript é chamado de search;
          var caminho = window.location.search;
          caminho = caminho.substring(5,caminho.length); 
           
          console.log(caminho);
          xhr.open("GET",url,true);             /* abrir e pegar pela url*/
          xhr.setRequestHeader("Authorization","Bearer "+caminho); /* irá necessitar da autorizacao para visualizar*/

           xhr.onload=function()
          {
            var json = JSON.parse(this.response); /* criar var json e pede para responder */
                    if(xhr.status >= 200 && xhr.status < 400)
                    {
                            json.forEach(dados => {
                                
                                var estrutura = "<h3>Nome: "+dados.nomeCliente+"</h3>"; // criar variavel estrutura h3 com dados + nome do cliente
                                estrutura +="<hr>"; //quebra a linha
                                estrutura +="CPF: "+ dados.cpf; // dados com o CPF
                                estrutura +="<br>Data de Cadastros: "+dados.dataCadastro; //quebra linha
                                estrutura +="<h3>Login: "+dados.nomeUsuario;
                                
                                
                                


                                document.getElementById("conteudo").innerHTML+=estrutura; //pede a div "conteudo" no html
                            });
                    }    
                    else{   
                    console.log("Erro de Autorização e|ou Exibição de dados")
                        }   
          }
                
          xhr.send();

      

      </script>
            <a href="../Front/cadevento.html">Cadastre seu Evento</a>
            

        <!-- fim do acesso para a api -->

    <!-- Optional JavaScript -->
    <!-- jQuery first, then Popper.js, then Bootstrap JS -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js" integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49" crossorigin="anonymous"></script>
    <script src="js/bootstrap.min.js"></script>
    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
  </body>
</html>